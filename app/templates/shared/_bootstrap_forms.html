{% macro render_inline_field(field) %}
<div class="form-group">
  {{ field(**kwargs)|safe }}
  {% if field.errors %}
    {% for error in field.errors %}
      <div class="label label-danger">{{ error }}</div>
    {% endfor %}
  {% endif %}
</div>
{% endmacro %}

{% macro render_normal_field(field, field_width=10, label_width=2, wrap_class='') %}
<div class="form-group">
    <label class="col-lg-{{label_width}} control-label">{{field.label}}</label>
    <div class="col-lg-{{field_width}}">
    	{% if wrap_class!='' %}
    	<div class="{{wrap_class}}">
    		{{ field(**kwargs)|safe }}
    	</div>
    	{% else %} 
    	{{ field(**kwargs)|safe }}
    	{% endif %}
    	
		{% if field.errors %}
			{% for error in field.errors %}
				<div class="label label-danger">{{ error }}</div>
			{% endfor %}
		{% endif %}        
    </div>
</div>
{% endmacro %}


{% macro render_comment(comment, current_user, post, recursive = False) %}
<article id="comment_{{comment.id}}" class="comment {{ 'reply' if recursive }}">
    <header class="clearfix">
        <img src="{{ comment.user.avatar(76) }}" alt="User: {{ comment.user.name }}" class="avatar">
        <div class="meta">
            <h3>{{ comment.user.name }} ({{ comment.user.nickname }})</h3>
            <span class="date">
                {{ comment.created_at | datetimeformat('%d %B %y, %H:%m')}}
            </span>
            {% if current_user.is_authenticated() %}
            <form class="pull-right" action="{{ url_for('reply_comment', post_id=post.id, id=comment.id) }}" data-remote="true" method="GET">
                <input class="btn btn-warning" name="commit" type="submit" value="Reply">
            </form>
            {% endif %}
        </div>
    </header>
     <div class="body">
        {{ comment.body | safe }}
    </div>
     <div class="reply">            
    </div>
</article>

{% if comment.replies.count() > 0 %}
  {% for reply in comment.replies %}
    {{ render_comment(reply, current_user, post, recursive = True) }}
  {% endfor %}
{% endif %}

{% endmacro %}




